# 🧪 로컬 테스트 간단 가이드

## 네! 그냥 창 2개 띄우면 돼요! 🎉

---

## 📋 준비

### 1️⃣ 서버 실행 (터미널 1)
```bash
cd server
npm start
```

**확인:**
```
🚀 짐프리 웹소켓 서버 시작 중...
🎉 웹소켓 서버가 포트 8080에서 실행 중입니다
```

### 2️⃣ 앱 실행 (터미널 2)
```bash
npm run dev
```

---

## 🎬 테스트 방법

### 방법 A: 브라우저 창 2개 (추천!) ✨

#### 창 1: 고객 (콜 보내기)
```
1. 일반 창에서 앱 열기
   → http://localhost:5173

2. 회원가입 / 로그인
   → 고객 계정으로 로그인

3. "짐 보관하기" 클릭

4. GS25 강남점 같은 가게 선택

5. "보관하기" 클릭

6. 결제하기 → 결제 완료! 💳
```

#### 창 2: 가맹점 (콜 받기)
```
1. 시크릿 창 열기 (Ctrl+Shift+N / Cmd+Shift+N)
   → 같은 주소: http://localhost:5173

2. 회원가입 / 로그인
   → 가맹점 계정으로 로그인

3. "콜 관리" 화면 대기

4. 창 1에서 결제하면...
   → 🔔 짠! 콜이 실시간으로 나타남!
```

---

### 방법 B: 다른 브라우저 2개

더 확실하게 테스트하려면:

**Chrome:** 고객 로그인
**Firefox/Edge:** 가맹점 로그인

→ 둘 다 같은 주소 열기
→ 결제하면 실시간 전송!

---

## 🎯 빠른 테스트 (30초 완료!)

```
┌─────────────────┐         ┌─────────────────┐
│   일반 창       │         │   시크릿 창     │
│                 │         │                 │
│  👤 고객        │         │  🏪 가맹점      │
│                 │         │                 │
│  1. 로그인      │         │  1. 로그인      │
│  2. 짐 보관     │         │  2. 콜 관리     │
│  3. 가게 선택   │         │  3. 대기중...   │
│  4. 결제 → 완료!│   💨    │  4. 콜 수신! 🔔 │
└─────────────────┘         └─────────────────┘
```

---

## ✅ 성공 확인

### 고객 화면 (창 1):
```
✓ 결제 완료 화면
✓ "보관 요청이 전송되었습니다" 메시지
```

### 가맹점 화면 (창 2):
```
✓ 새로운 콜 카드 나타남!
✓ 고객 정보 표시
✓ 예상 금액 표시
```

### 서버 터미널:
```
✅ 새로운 클라이언트 연결됨
👤 사용자 인증됨: user_xxx (customer)
📊 현재 연결 수 - 고객: 1, 가맹점: 0, 배달기사: 0

✅ 새로운 클라이언트 연결됨
👤 사용자 인증됨: user_yyy (partner)
📊 현재 연결 수 - 고객: 1, 가맹점: 1, 배달기사: 0

📦 새로운 보관 콜 생성: #1
📢 1개 가맹점에게 콜 전송됨
```

---

## 🔍 문제 해결

### Q: 콜이 안 나타나요!

**체크리스트:**
- [ ] 서버가 실행 중인가? (`npm start`)
- [ ] 창 1: 고객으로 로그인했나?
- [ ] 창 2: 가맹점으로 로그인했나?
- [ ] 창 2가 "콜 관리" 화면인가?
- [ ] 브라우저 콘솔(F12)에 에러 없나?

**해결:**
```bash
1. 서버 재시작: Ctrl+C → npm start
2. 브라우저 모두 새로고침
3. 다시 로그인
```

---

### Q: 웹소켓 연결 안 돼요!

**서버 콘솔 확인:**
```
🎉 웹소켓 서버가 포트 8080에서 실행 중입니다
```

이 메시지가 안 보이면:
```bash
cd server
npm install  # 처음 한 번만
npm start
```

---

### Q: 계정이 없어요!

**회원가입:**
```
1. "회원가입" 클릭
2. 사용자 유형 선택:
   - 일반 고객
   - 가맹점
   - 배달 기사
3. 정보 입력
4. 완료!
```

**빠른 테스트용:**
- 창 1: 고객 계정 새로 만들기
- 창 2: 가맹점 계정 새로 만들기

---

## 💡 꿀팁

### 1. 개발자 도구 열어두기
```
F12 또는 Ctrl+Shift+I

Console 탭에서 실시간 로그 확인:
- 웹소켓 연결 상태
- 메시지 전송/수신
- 에러 발생 시 빨간색 표시
```

### 2. 서버 로그 확인
```
서버 터미널을 보면:
- 누가 연결했는지
- 콜이 생성되었는지
- 몇 명에게 전송되었는지
실시간으로 볼 수 있어요!
```

### 3. 여러 개 콜 테스트
```
1. 창 1에서 결제
2. 다시 뒤로가기
3. 또 다른 가게 선택
4. 또 결제!
→ 창 2에 콜 2개 쌓임! 📚
```

---

## 🎊 테스트 시나리오

### 시나리오 1: 짐 보관 🎒
```
창 1 (고객):
1. "짐 보관하기" 클릭
2. GS25 강남점 선택
3. "보관하기" 클릭
4. 결제 완료

창 2 (가맹점):
→ 🔔 새로운 보관 요청!
→ 클릭해서 상세 정보 확인
→ "수락하기" 누르면 완료!
```

### 시나리오 2: 짐 배달 🚚
```
창 1 (고객):
1. "짐 배달하기" 클릭
2. 출발지/도착지 선택
3. "배달 신청하기" 클릭
4. 결제 완료

창 2 (배달기사):
※ 로그인 시 "배달 기사" 선택!
→ 🔔 새로운 배달 요청!
→ 경로 확인
→ "수락하기" 누르면 완료!
```

---

## 📊 예상 결과

### 정상 작동 시:

**타이밍:**
- 결제 버튼 클릭 → 1초 이내
- 가맹점 화면에 콜 표시!

**표시 정보:**
- ✅ 고객 정보
- ✅ 주소
- ✅ 예상 금액
- ✅ 시간 정보

**서버 로그:**
```
📦 새로운 보관 콜 생성: #1
📢 1개 가맹점에게 콜 전송됨
```

---

## 🚀 다음 단계

테스트 성공하면:
- ✅ 실시간 통신 작동 확인!
- ✅ 콜 수락 기능 테스트
- ✅ 여러 개 콜 동시 처리
- ✅ 멀티 가맹점 테스트

---

## 📝 정리

**가장 간단한 방법:**
```
1. 서버 실행
2. 일반 창 1개 (고객)
3. 시크릿 창 1개 (가맹점)
4. 결제하면 콜 전송!
```

**Ctrl+Shift+N 만 기억하세요!** 😊

---

**Happy Testing! 🎉**
