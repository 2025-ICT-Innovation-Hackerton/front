# 🎯 혼자서 콜 테스트 완벽 가이드

## ✨ 가맹점 조회 서버 없이 테스트 가능!

더미 데이터가 이미 들어있어서 **서버 없이도 100% 작동**합니다! 🎉

---

## 🚀 1분 안에 시작하기

### Step 1: 웹소켓 서버만 실행 ✅

**터미널 1:**
```bash
cd server
npm start
```

**확인:**
```
🚀 짐프리 웹소켓 서버 시작 중...
🎉 웹소켓 서버가 포트 8080에서 실행 중입니다
```

### Step 2: 앱 실행 ✅

**터미널 2:**
```bash
npm run dev
```

**확인:**
```
  ➜  Local:   http://localhost:5173/
```

---

## 🎬 혼자서 콜 테스트 (3분 완료!)

### 준비물:
- ✅ 웹소켓 서버 실행
- ✅ 브라우저 창 2개 (일반 + 시크릿)
- ✅ **가맹점 서버 필요 없음!** 🎉

---

## 📱 창 1: 고객 (콜 보내기)

### 1단계: 로그인
```
1. 일반 창에서 http://localhost:5173 열기
2. 회원가입 클릭
3. "일반 고객" 선택
4. 정보 입력하고 가입
5. 로그인 완료!
```

### 2단계: 짐 보관 선택
```
1. 메인 화면에서 "짐 보관하기" 클릭
2. "보관 시작하기" 버튼 클릭
```

### 3단계: 가게 선택 (더미 데이터 표시됨!)
```
✨ 자동으로 5개 가게가 나타남!

1. 편의점 GS25 강남점
2. 카페 투썸플레이스
3. 게스트하우스 서울
4. CU 편의점
5. 호텔 비즈니스

→ 아무거나 선택! (예: 편의점 GS25)
```

### 4단계: 보관하기
```
1. "보관하기" 버튼 클릭
2. 보관 시작 시간 선택
3. 찾을 시간 선택
4. "다음" 클릭
```

### 5단계: 결제! 💳
```
1. 결제 화면에서 정보 확인
2. "결제하기" 버튼 클릭
3. 결제 완료!

→ 이 순간 웹소켓으로 콜 전송됨! 🚀
```

---

## 🏪 창 2: 가맹점 (콜 받기)

### 1단계: 가맹점 로그인
```
1. 시크릿 창 열기 (Ctrl+Shift+N)
2. http://localhost:5173 열기
3. 회원가입 클릭
4. "가맹점" 선택 ⭐
5. 가맹점 정보 입력:
   - 가게 이름: GS25 강남점
   - 주소: 서울시 강남구...
   - 등등
6. 가입 완료!
```

### 2단계: 콜 관리 화면 대기
```
1. 자동으로 "콜 관리" 화면으로 이동
2. "대기 중..." 표시됨
3. 이제 창 1에서 결제를 기다림!
```

### 3단계: 콜 수신! 🔔
```
창 1에서 결제 완료하면...

💥 짠! 실시간으로 콜이 나타남!

┌─────────────────────────────┐
│ 🔔 새로운 보관 요청         │
│                             │
│ 📦 짐 보관                  │
│ 고객: 홍길동                │
│ 주소: 편의점 GS25           │
│ 예상 금액: 5,000원          │
│                             │
│ [상세보기] [수락하기]       │
└─────────────────────────────┘
```

---

## 🎉 완전 자동 테스트 (서버 필요 없음!)

### 테스트 1: 짐 보관 콜 📦

**창 1 (고객):**
```
메인 → 짐 보관하기 → 편의점 GS25 선택 → 보관하기 → 결제
```

**창 2 (가맹점):**
```
자동으로 콜 수신! 🔔
```

**더미 데이터:**
- ✅ 편의점 GS25 강남점
- ✅ 카페 투썸플레이스
- ✅ 게스트하우스 서울
- ✅ CU 편의점
- ✅ 호텔 비즈니스

→ **가맹점 서버 없이도 모두 표시됨!**

---

### 테스트 2: 짐 배달 콜 🚚

**창 1 (고객):**
```
메인 → 짐 배달하기 → 출발지 선택 → 도착지 선택 → 결제
```

**창 3 (배달기사):**
```
시크릿 창 하나 더 열기 (Ctrl+Shift+N)
배달기사로 로그인
콜 관리 화면 대기
→ 자동으로 배달 콜 수신! 🔔
```

**더미 데이터:**
- ✅ 출발지: 5개 가게 자동 표시
- ✅ 도착지: 5개 장소 자동 표시
- ✅ 경로 계산 자동
- ✅ 금액 자동 계산

---

## 🎯 빠른 체크리스트

### ✅ 사전 준비
- [ ] 웹소켓 서버 실행 (`cd server && npm start`)
- [ ] 앱 실행 (`npm run dev`)
- [ ] 브라우저 창 2개 준비

### ✅ 창 1 (고객)
- [ ] 일반 창에서 앱 열기
- [ ] 고객으로 회원가입/로그인
- [ ] 짐 보관하기 선택
- [ ] 가게 선택 (더미 데이터 자동 표시!)
- [ ] 결제하기

### ✅ 창 2 (가맹점)
- [ ] 시크릿 창에서 앱 열기
- [ ] 가맹점으로 회원가입/로그인
- [ ] 콜 관리 화면 대기
- [ ] 콜 수신 확인! 🔔

---

## 🔍 서버 콘솔 확인

### 정상 작동 시:

```bash
# 고객 연결
✅ 새로운 클라이언트 연결됨: 127.0.0.1
👤 사용자 인증됨: user_1234 (customer)
📊 현재 연결 수 - 고객: 1, 가맹점: 0, 배달기사: 0

# 가맹점 연결
✅ 새로운 클라이언트 연결됨: 127.0.0.1
👤 사용자 인증됨: user_5678 (partner)
📊 현재 연결 수 - 고객: 1, 가맹점: 1, 배달기사: 0

# 콜 전송!
📦 새로운 보관 콜 생성: #1
📢 1개 가맹점에게 콜 전송됨
```

---

## 💡 왜 서버 없이도 작동하나요?

### 더미 데이터가 코드에 내장되어 있어요!

**StorageMapPage.tsx:**
```typescript
const locations: StorageLocation[] = apiLocations.length > 0 ? apiLocations : [
  // 더미 데이터 5개
  { id: 1, name: '편의점 GS25', ... },
  { id: 2, name: '카페 투썸플레이스', ... },
  // ...
];
```

**DeliveryMapPage.tsx:**
```typescript
const originStores: DeliveryStore[] = apiStores.length > 0 ? apiStores : [
  // 더미 데이터 5개
  { id: 1, name: '편의점 GS25', ... },
  // ...
];
```

→ **API가 없으면 자동으로 더미 데이터 사용!** 🎉

---

## 🎊 테스트 시나리오

### 시나리오 A: 단일 콜 테스트
```
1. 고객 로그인 (창 1)
2. 가맹점 로그인 (창 2)
3. 고객: 결제하기
4. 가맹점: 콜 수신 확인!
```

**예상 시간:** 2분

---

### 시나리오 B: 여러 콜 테스트
```
1. 고객 로그인 (창 1)
2. 가맹점 로그인 (창 2)
3. 고객: 첫 번째 결제
4. 가맹점: 콜 1 수신 ✅
5. 고객: 뒤로가기 → 두 번째 결제
6. 가맹점: 콜 2 수신 ✅
7. 가맹점: 콜 2개가 리스트에 쌓임!
```

**예상 시간:** 5분

---

### 시나리오 C: 콜 수락 테스트
```
1. 가맹점에 콜 전송
2. 가맹점: "상세보기" 클릭
3. 콜 상세 정보 확인
4. "수락하기" 클릭
5. 콜이 "진행 중" 상태로 변경!
```

**예상 시간:** 1분

---

## 🛠️ 문제 해결

### Q1: 가게가 안 보여요!

**해결:**
```
더미 데이터가 이미 내장되어 있어요!
가맹점 서버 없어도 자동으로 5개 가게 표시됨!

혹시 안 보이면:
1. 브라우저 새로고침 (F5)
2. 콘솔 확인 (F12)
```

---

### Q2: 콜이 안 와요!

**체크리스트:**
- [ ] 웹소켓 서버 실행 중?
- [ ] 창 1: 고객으로 로그인?
- [ ] 창 2: 가맹점으로 로그인?
- [ ] 창 1에서 결제 완료?

**서버 콘솔 확인:**
```bash
# 이 메시지가 나와야 함
📦 새로운 보관 콜 생성: #1
📢 1개 가맹점에게 콜 전송됨
```

없으면:
```bash
1. 웹소켓 서버 재시작
2. 브라우저 모두 새로고침
3. 다시 로그인
```

---

### Q3: 웹소켓 연결 안 돼요!

**확인:**
```bash
# 서버 터미널
🎉 웹소켓 서버가 포트 8080에서 실행 중입니다
```

**안 보이면:**
```bash
cd server
npm install
npm start
```

**브라우저 콘솔 (F12):**
```
웹소켓 연결 시도: ws://localhost:8080
웹소켓 연결 성공
```

---

## 🎨 테스트 팁

### 1. 개발자 도구 활용
```
F12 또는 Ctrl+Shift+I

Console 탭:
- 웹소켓 연결 상태
- 메시지 전송/수신 로그
- 에러 확인

Network 탭:
- WS 연결 확인
- 실시간 메시지 확인
```

---

### 2. 여러 가게 테스트
```
더미 데이터 5개 모두 사용 가능:

1. 편의점 GS25
2. 카페 투썸플레이스
3. 게스트하우스 서울
4. CU 편의점
5. 호텔 비즈니스

→ 각각 다른 가격, 위치!
```

---

### 3. 배달 기사도 테스트
```
창 3 (배달기사):

1. 시크릿 창 하나 더 열기
2. 배달기사로 로그인
3. 콜 관리 화면

창 1 (고객):
짐 배달하기 선택 → 결제

창 3:
→ 배달 콜 수신! 🚚
```

---

## 📊 예상 결과

### 성공 시:

**고객 화면:**
```
✅ 결제 완료
✅ "보관 요청이 전송되었습니다"
```

**가맹점 화면:**
```
🔔 새로운 보관 요청 (실시간!)

┌──────────────────────┐
│ 📦 짐 보관           │
│ 고객: 홍길동         │
│ 주소: 편의점 GS25    │
│ 금액: 5,000원        │
│                      │
│ [상세보기] [수락]    │
└──────────────────────┘
```

**서버 콘솔:**
```
📦 새로운 보관 콜 생성: #1
📢 1개 가맹점에게 콜 전송됨
```

---

## 🎯 핵심 포인트

### ✅ 가맹점 서버 불필요
- 더미 데이터 5개 내장
- 자동으로 표시됨
- 실제 서버와 동일하게 작동

### ✅ 웹소켓만 필요
- 실시간 콜 전송/수신
- 포트 8080

### ✅ 브라우저 2개만
- 일반 창: 고객
- 시크릿 창: 가맹점
- Ctrl+Shift+N

---

## 🚀 30초 요약

```bash
# 1. 서버 실행
cd server && npm start

# 2. 앱 실행
npm run dev

# 3. 창 2개
- 일반 창: 고객 로그인 → 결제
- 시크릿 창: 가맹점 로그인 → 콜 수신!

완료! 🎉
```

---

## 📝 체크리스트

### 시작 전:
- [ ] Node.js 설치됨
- [ ] `cd server && npm install` 완료
- [ ] 프로젝트 루트에서 `npm install` 완료

### 실행:
- [ ] 웹소켓 서버 실행 중 (터미널 1)
- [ ] 앱 실행 중 (터미널 2)

### 테스트:
- [ ] 고객 창 준비 (일반)
- [ ] 가맹점 창 준비 (시크릿)
- [ ] 결제하면 콜 수신!

---

## 🎊 축하합니다!

**가맹점 서버 없이도 완벽하게 작동합니다!** 🎉

더미 데이터로 모든 기능을 테스트할 수 있어요:
- ✅ 짐 보관 콜
- ✅ 짐 배달 콜
- ✅ 실시간 전송
- ✅ 콜 수락
- ✅ 이력 관리

**Happy Testing! 🚀**
